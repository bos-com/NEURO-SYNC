{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Jaylo\\\\Documents\\\\NeuroSync\\\\client\\\\src\\\\components\\\\ChatBoxClean.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect, useImperativeHandle, forwardRef } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { sendTextMessage, getAudioResponse } from \"../services/api\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ChatBox = /*#__PURE__*/_s(/*#__PURE__*/forwardRef(_c = _s(function ChatBox(props, ref) {\n  _s();\n  const {\n    t,\n    i18n\n  } = useTranslation();\n  const [messages, setMessages] = useState([{\n    sender: \"ai\",\n    text: t('chat.greeting')\n  }]);\n\n  // Update greeting when language changes\n  useEffect(() => {\n    setMessages(prev => {\n      const updated = [...prev];\n      if (updated[0] && updated[0].sender === 'ai') {\n        updated[0] = {\n          ...updated[0],\n          text: t('chat.greeting')\n        };\n      }\n      return updated;\n    });\n  }, [i18n.language, t]);\n  const [input, setInput] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [playingAudio, setPlayingAudio] = useState(null);\n  const audioRef = useRef(null);\n\n  // Play audio from data URL\n  const playAudio = audioUrl => {\n    if (!audioUrl) return;\n    if (audioRef.current) {\n      audioRef.current.pause();\n    }\n    const audio = new Audio(audioUrl);\n    audioRef.current = audio;\n    audio.onended = () => {\n      setPlayingAudio(null);\n    };\n    audio.onerror = () => {\n      console.error(\"Error playing audio\");\n      setPlayingAudio(null);\n    };\n    audio.play().catch(err => {\n      console.error(\"Error playing audio:\", err);\n      setPlayingAudio(null);\n    });\n    setPlayingAudio(audioUrl);\n  };\n\n  // Cleanup audio on unmount\n  useEffect(() => {\n    return () => {\n      if (audioRef.current) {\n        audioRef.current.pause();\n      }\n    };\n  }, []);\n  const handleSend = async (textToSend = null, useVoice = false) => {\n    const messageText = textToSend || input.trim();\n    if (!messageText) return;\n    const userMsg = {\n      sender: \"user\",\n      text: messageText\n    };\n    setMessages(prev => [...prev, userMsg]);\n    if (!textToSend) setInput(\"\");\n    setLoading(true);\n    try {\n      const res = await sendTextMessage(messageText);\n      const aiMsg = {\n        sender: \"ai\",\n        text: res.message || \"...\",\n        audioUrl: null,\n        emotion: res.emotion,\n        confidence: res.confidence,\n        suggestions: res.suggestions\n      };\n      setMessages(prev => [...prev, aiMsg]);\n\n      // Always get audio response (for both voice and text)\n      try {\n        const audioRes = await getAudioResponse(res.message, i18n.language);\n        if (audioRes.audioUrl) {\n          // Update message with audio URL\n          setMessages(prev => {\n            const updated = [...prev];\n            updated[updated.length - 1].audioUrl = audioRes.audioUrl;\n            return updated;\n          });\n          // Auto-play if voice mode, otherwise just make it available\n          if (useVoice) {\n            playAudio(audioRes.audioUrl);\n          }\n        }\n      } catch (audioErr) {\n        console.error(\"Error getting audio:\", audioErr);\n      }\n    } catch (err) {\n      console.error(\"API Error:\", err);\n      setMessages(prev => [...prev, {\n        sender: \"ai\",\n        text: `${t('chat.error')} - ${err.message || 'Server not responding'}`\n      }]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Expose methods to parent component\n  useImperativeHandle(ref, () => ({\n    addMessage: message => {\n      setMessages(prev => [...prev, message]);\n      if (message.audioUrl) {\n        playAudio(message.audioUrl);\n      }\n    }\n  }));\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-gray-800 p-4 rounded-2xl shadow-lg flex flex-col h-96\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-xl font-semibold mb-3\",\n      children: \"\\uD83D\\uDCAC Chat\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-1 overflow-y-auto space-y-2 mb-3\",\n      children: [messages.map((msg, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `p-3 rounded-lg max-w-[80%] ${msg.sender === \"user\" ? \"bg-blue-600 self-end text-right ml-auto\" : \"bg-gray-700 text-left\"}`,\n        children: [msg.emotion && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-xs mb-1 opacity-75\",\n          children: [\"\\uD83C\\uDFAD Detected: \", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"font-semibold\",\n            children: msg.emotion\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 30\n          }, this), msg.confidence && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"ml-1\",\n            children: [\"(\", Math.round(msg.confidence * 100), \"% confidence)\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm\",\n          children: msg.text\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 13\n        }, this), msg.suggestions && msg.suggestions.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-2 text-xs opacity-75\",\n          children: [\"\\uD83D\\uDCA1 Suggestions: \", msg.suggestions.slice(0, 2).join(\", \")]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 15\n        }, this)]\n      }, i, true, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 11\n      }, this)), loading && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-sm text-gray-400 animate-pulse\",\n        children: t('chat.thinking')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex gap-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        value: input,\n        onChange: e => setInput(e.target.value),\n        onKeyPress: e => e.key === 'Enter' && handleSend(),\n        placeholder: \"Type your message...\",\n        className: \"flex-1 bg-gray-700 text-white p-2 rounded-lg outline-none\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => handleSend(),\n        disabled: loading,\n        className: \"bg-cyan-600 hover:bg-cyan-700 px-4 rounded-lg font-semibold disabled:opacity-50\",\n        children: t('chat.send')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 7\n    }, this), messages.filter(msg => msg.audioUrl).length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-2 flex gap-2 flex-wrap\",\n      children: messages.map((msg, i) => msg.audioUrl && /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => playAudio(msg.audioUrl),\n        className: \"text-xs bg-purple-600 hover:bg-purple-700 px-2 py-1 rounded\",\n        children: [\"\\uD83D\\uDD0A Play \", msg.sender === 'ai' ? 'AI' : 'Response']\n      }, `audio-${i}`, true, {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 15\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 124,\n    columnNumber: 5\n  }, this);\n}, \"gfYMHEXSz0FxgHu66+4a+2dlVyY=\", false, function () {\n  return [useTranslation];\n})), \"gfYMHEXSz0FxgHu66+4a+2dlVyY=\", false, function () {\n  return [useTranslation];\n});\n_c2 = ChatBox;\nexport default ChatBox;\nvar _c, _c2;\n$RefreshReg$(_c, \"ChatBox$forwardRef\");\n$RefreshReg$(_c2, \"ChatBox\");","map":{"version":3,"names":["React","useState","useRef","useEffect","useImperativeHandle","forwardRef","useTranslation","sendTextMessage","getAudioResponse","jsxDEV","_jsxDEV","ChatBox","_s","_c","props","ref","t","i18n","messages","setMessages","sender","text","prev","updated","language","input","setInput","loading","setLoading","playingAudio","setPlayingAudio","audioRef","playAudio","audioUrl","current","pause","audio","Audio","onended","onerror","console","error","play","catch","err","handleSend","textToSend","useVoice","messageText","trim","userMsg","res","aiMsg","message","emotion","confidence","suggestions","audioRes","length","audioErr","addMessage","className","children","fileName","_jsxFileName","lineNumber","columnNumber","map","msg","i","Math","round","slice","join","value","onChange","e","target","onKeyPress","key","placeholder","onClick","disabled","filter","_c2","$RefreshReg$"],"sources":["C:/Users/Jaylo/Documents/NeuroSync/client/src/components/ChatBoxClean.jsx"],"sourcesContent":["import React, { useState, useRef, useEffect, useImperativeHandle, forwardRef } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { sendTextMessage, getAudioResponse } from \"../services/api\";\r\n\r\nconst ChatBox = forwardRef(function ChatBox(props, ref) {\r\n  const { t, i18n } = useTranslation();\r\n  const [messages, setMessages] = useState([\r\n    { sender: \"ai\", text: t('chat.greeting') },\r\n  ]);\r\n\r\n  // Update greeting when language changes\r\n  useEffect(() => {\r\n    setMessages((prev) => {\r\n      const updated = [...prev];\r\n      if (updated[0] && updated[0].sender === 'ai') {\r\n        updated[0] = { ...updated[0], text: t('chat.greeting') };\r\n      }\r\n      return updated;\r\n    });\r\n  }, [i18n.language, t]);\r\n  const [input, setInput] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n  const [playingAudio, setPlayingAudio] = useState(null);\r\n  const audioRef = useRef(null);\r\n\r\n  // Play audio from data URL\r\n  const playAudio = (audioUrl) => {\r\n    if (!audioUrl) return;\r\n    \r\n    if (audioRef.current) {\r\n      audioRef.current.pause();\r\n    }\r\n    \r\n    const audio = new Audio(audioUrl);\r\n    audioRef.current = audio;\r\n    \r\n    audio.onended = () => {\r\n      setPlayingAudio(null);\r\n    };\r\n    \r\n    audio.onerror = () => {\r\n      console.error(\"Error playing audio\");\r\n      setPlayingAudio(null);\r\n    };\r\n    \r\n    audio.play().catch(err => {\r\n      console.error(\"Error playing audio:\", err);\r\n      setPlayingAudio(null);\r\n    });\r\n    \r\n    setPlayingAudio(audioUrl);\r\n  };\r\n\r\n  // Cleanup audio on unmount\r\n  useEffect(() => {\r\n    return () => {\r\n      if (audioRef.current) {\r\n        audioRef.current.pause();\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  const handleSend = async (textToSend = null, useVoice = false) => {\r\n    const messageText = textToSend || input.trim();\r\n    if (!messageText) return;\r\n\r\n    const userMsg = { sender: \"user\", text: messageText };\r\n    setMessages((prev) => [...prev, userMsg]);\r\n    if (!textToSend) setInput(\"\");\r\n    setLoading(true);\r\n\r\n    try {\r\n      const res = await sendTextMessage(messageText);\r\n      const aiMsg = { \r\n        sender: \"ai\", \r\n        text: res.message || \"...\",\r\n        audioUrl: null,\r\n        emotion: res.emotion,\r\n        confidence: res.confidence,\r\n        suggestions: res.suggestions\r\n      };\r\n      setMessages((prev) => [...prev, aiMsg]);\r\n      \r\n      // Always get audio response (for both voice and text)\r\n      try {\r\n        const audioRes = await getAudioResponse(res.message, i18n.language);\r\n        if (audioRes.audioUrl) {\r\n          // Update message with audio URL\r\n          setMessages((prev) => {\r\n            const updated = [...prev];\r\n            updated[updated.length - 1].audioUrl = audioRes.audioUrl;\r\n            return updated;\r\n          });\r\n          // Auto-play if voice mode, otherwise just make it available\r\n          if (useVoice) {\r\n            playAudio(audioRes.audioUrl);\r\n          }\r\n        }\r\n      } catch (audioErr) {\r\n        console.error(\"Error getting audio:\", audioErr);\r\n      }\r\n    } catch (err) {\r\n      console.error(\"API Error:\", err);\r\n      setMessages((prev) => [\r\n        ...prev,\r\n        { sender: \"ai\", text: `${t('chat.error')} - ${err.message || 'Server not responding'}` },\r\n      ]);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Expose methods to parent component\r\n  useImperativeHandle(ref, () => ({\r\n    addMessage: (message) => {\r\n      setMessages((prev) => [...prev, message]);\r\n      if (message.audioUrl) {\r\n        playAudio(message.audioUrl);\r\n      }\r\n    }\r\n  }));\r\n\r\n  return (\r\n    <div className=\"bg-gray-800 p-4 rounded-2xl shadow-lg flex flex-col h-96\">\r\n      <h2 className=\"text-xl font-semibold mb-3\">ðŸ’¬ Chat</h2>\r\n      <div className=\"flex-1 overflow-y-auto space-y-2 mb-3\">\r\n        {messages.map((msg, i) => (\r\n          <div\r\n            key={i}\r\n            className={`p-3 rounded-lg max-w-[80%] ${\r\n              msg.sender === \"user\"\r\n                ? \"bg-blue-600 self-end text-right ml-auto\"\r\n                : \"bg-gray-700 text-left\"\r\n            }`}\r\n          >\r\n            {msg.emotion && (\r\n              <div className=\"text-xs mb-1 opacity-75\">\r\n                ðŸŽ­ Detected: <span className=\"font-semibold\">{msg.emotion}</span>\r\n                {msg.confidence && (\r\n                  <span className=\"ml-1\">({Math.round(msg.confidence * 100)}% confidence)</span>\r\n                )}\r\n              </div>\r\n            )}\r\n            <p className=\"text-sm\">{msg.text}</p>\r\n            {msg.suggestions && msg.suggestions.length > 0 && (\r\n              <div className=\"mt-2 text-xs opacity-75\">\r\n                ðŸ’¡ Suggestions: {msg.suggestions.slice(0, 2).join(\", \")}\r\n              </div>\r\n            )}\r\n          </div>\r\n        ))}\r\n        {loading && (\r\n          <div className=\"text-sm text-gray-400 animate-pulse\">{t('chat.thinking')}</div>\r\n        )}\r\n      </div>\r\n      <div className=\"flex gap-2\">\r\n        <input\r\n          value={input}\r\n          onChange={(e) => setInput(e.target.value)}\r\n          onKeyPress={(e) => e.key === 'Enter' && handleSend()}\r\n          placeholder=\"Type your message...\"\r\n          className=\"flex-1 bg-gray-700 text-white p-2 rounded-lg outline-none\"\r\n        />\r\n        <button\r\n          onClick={() => handleSend()}\r\n          disabled={loading}\r\n          className=\"bg-cyan-600 hover:bg-cyan-700 px-4 rounded-lg font-semibold disabled:opacity-50\"\r\n        >\r\n          {t('chat.send')}\r\n        </button>\r\n      </div>\r\n      {messages.filter(msg => msg.audioUrl).length > 0 && (\r\n        <div className=\"mt-2 flex gap-2 flex-wrap\">\r\n          {messages.map((msg, i) => \r\n            msg.audioUrl && (\r\n              <button\r\n                key={`audio-${i}`}\r\n                onClick={() => playAudio(msg.audioUrl)}\r\n                className=\"text-xs bg-purple-600 hover:bg-purple-700 px-2 py-1 rounded\"\r\n              >\r\n                ðŸ”Š Play {msg.sender === 'ai' ? 'AI' : 'Response'}\r\n              </button>\r\n            )\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default ChatBox;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}